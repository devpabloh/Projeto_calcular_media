<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Esse site contem uma calculadora que colocando as suas notas, lhe mostra a sua média final">
    <meta name="keywords" content="calculadora, calcular média, calc média">
    <met name="autor" content="Dev Pablo H.">
    <title>Calculadora de notas</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- CSS -->
    <link rel="stylesheet" href="global.css">
    <link rel="stylesheet" href="css/estilo.css">
</head>
<body>
    <header>
        <div>
            <h1>Calculadora de média</h1>
        </div>
    </header>
    <main>
        <table>
            <thead>
                <tr>
                    <th aluno-nota="nome">Aluno</th>
                    <th aluno-nota="nota1">Nota 1</th>
                    <th aluno-nota="nota2">Nota 2</th>
                    <th aluno-nota="nota3">Nota 3</th>
                    <th aluno-nota="nota4">Nota 4</th>
                    <th aluno-nota="media">Média</th>
                    <th class="situacao">Situação</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><input type="text" name=""></td>
                    <td><input type="number" name="" ></td>
                    <td><input type="number" name="" ></td>
                    <td><input type="number" name="" ></td>
                    <td><input type="number" name="" ></td>
                    <td><span></span></td>
                    <td><button onclick="calcularMedia()">calcular</button></td>  
                </tr>
            </tbody>
        </table>

    </main>
    <footer>

    </footer>
    <script>
    function calcularMedia(){
        let trHeader = document.querySelector('thead tr')
        let thsHeader = document.querySelector("th")
        let thAlunosNotas = document.querySelector("[aluno-nota]") 
        const indices_notas = {}

        Array.from(thAlunosNotas).forEach(function(th){
            let prop = th.getAttibute("aluno-nota")
            indices_notas[prop] = pegarIndice(prop)
        })

        function pegarIndice(indice){
            const th = trHeader.querySelector(`[aluno-nota="${indice}"]
        `)

        const i = Array.prototype.indexOf.call(thsHeader, th)
            return i
        }

        const trs = document.querySelectorAll("tbody tr")

        let x = 0
        let media = 0

        while(trs[x]){
            const tds = trs[x].querySelectorAll('td')

            media = avarege(
                parseFloat(tds(indices_notas.n1).textContent),
                parseFloat(tds(indices_notas.n2).textContent),
                parseFloat(tds(indices_notas.n3).textContent),
                parseFloat(tds(indices_notas.n4).textContent)
            )
            x++

        tds[indices_notas.media].textContent = media
        }

    }
    </script>
    
</body>
</html>